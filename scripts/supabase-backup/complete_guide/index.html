<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš€ Complete Supabase Backup & Restore Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #3ecf8e;
            --secondary: #1e293b;
            --accent: #22c55e;
            --bg: #ffffff;
            --surface: #f8fafc;
            --text: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --code-bg: #1e293b;
            --warning: #f59e0b;
            --error: #ef4444;
            --info: #3b82f6;
            --success: #10b981;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            line-height: 1.7;
            color: var(--text);
            background: var(--bg);
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            padding: 3rem 0;
            border-bottom: 3px solid var(--primary);
            margin-bottom: 3rem;
            background: linear-gradient(135deg, #f0fdf4 0%, #dbeafe 100%);
            border-radius: 1rem;
        }

        .header h1 {
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 0.5rem;
        }

        .header .subtitle {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        nav {
            background: var(--surface);
            padding: 2rem;
            border-radius: 0.5rem;
            margin-bottom: 3rem;
            border-left: 4px solid var(--primary);
        }

        nav h2 {
            margin-bottom: 1rem;
            color: var(--secondary);
        }

        nav ul {
            list-style: none;
        }

        nav ul li {
            margin: 0.5rem 0;
        }

        nav ul li a {
            color: var(--text);
            text-decoration: none;
            padding: 0.5rem;
            display: block;
            border-radius: 0.25rem;
            transition: all 0.2s;
        }

        nav ul li a:hover {
            background: var(--primary);
            color: white;
            padding-left: 1rem;
        }

        section {
            margin-bottom: 4rem;
        }

        h2 {
            font-size: 2rem;
            color: var(--secondary);
            margin: 2rem 0 1rem 0;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary);
        }

        h3 {
            font-size: 1.5rem;
            color: var(--secondary);
            margin: 1.5rem 0 1rem 0;
        }

        h4 {
            font-size: 1.2rem;
            color: var(--secondary);
            margin: 1rem 0 0.5rem 0;
        }

        p {
            margin-bottom: 1rem;
        }

        code {
            background: #f1f5f9;
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
            color: #e11d48;
        }

        pre {
            background: var(--code-bg);
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin: 1rem 0;
            border-left: 4px solid var(--primary);
        }

        pre code {
            background: transparent;
            color: #e2e8f0;
            padding: 0;
        }

        .callout {
            padding: 1rem 1.5rem;
            margin: 1rem 0;
            border-radius: 0.5rem;
            border-left: 4px solid;
        }

        .callout-warning {
            background: #fffbeb;
            border-color: var(--warning);
        }

        .callout-info {
            background: #eff6ff;
            border-color: var(--info);
        }

        .callout-success {
            background: #f0fdf4;
            border-color: var(--success);
        }

        .callout-error {
            background: #fef2f2;
            border-color: var(--error);
        }

        .callout-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: white;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        thead {
            background: var(--secondary);
            color: white;
        }

        th,
        td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        tbody tr:hover {
            background: var(--surface);
        }

        ul,
        ol {
            margin-left: 2rem;
            margin-bottom: 1rem;
        }

        li {
            margin: 0.5rem 0;
        }

        .tree {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            background: var(--surface);
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }

        .step {
            background: white;
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: 0.5rem;
            border-left: 4px solid var(--primary);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .checklist {
            background: var(--surface);
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }

        .checklist li {
            list-style: none;
            padding: 0.5rem 0;
        }

        .checklist input[type="checkbox"] {
            margin-right: 0.5rem;
        }

        .collapsible {
            background: var(--primary);
            color: white;
            cursor: pointer;
            padding: 1rem 1.5rem;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 0.5rem;
            margin: 1rem 0;
            transition: all 0.3s;
        }

        .collapsible:hover {
            background: var(--accent);
        }

        .collapsible:after {
            content: 'â–¼';
            float: right;
            margin-left: 5px;
            transition: transform 0.3s;
        }

        .collapsible.active:after {
            transform: rotate(-180deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background: var(--surface);
            border-radius: 0 0 0.5rem 0.5rem;
        }

        .collapsible-content.active {
            max-height: 5000px;
            padding: 1.5rem;
        }

        .copy-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.25rem;
            cursor: pointer;
            font-size: 0.9rem;
            margin-top: 0.5rem;
            transition: all 0.2s;
        }

        .copy-button:hover {
            background: var(--accent);
        }

        @media print {
            body {
                max-width: 100%;
                padding: 1rem;
            }

            nav {
                display: none;
            }

            section {
                page-break-inside: avoid;
            }

            pre {
                page-break-inside: avoid;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            h2 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>

<body>

    <div class="header">
        <h1>ğŸš€ Complete Supabase Backup & Restore Guide</h1>
        <p class="subtitle">ğŸ“˜ Comprehensive documentation for backing up and restoring your Supabase project</p>
    </div>

    <nav>
        <h2>ğŸ“‘ Table of Contents</h2>
        <ul>
            <li><a href="#prerequisites">âœ… Prerequisites</a></li>
            <li><a href="#setup">ğŸ› ï¸ Initial Setup</a></li>
            <li><a href="#backup">ğŸ’¾ Creating a Backup</a></li>
            <li><a href="#restore">ğŸ”„ Restoring to a New Project</a></li>
            <li><a href="#functions">âš¡ Migrating Edge Functions</a></li>
            <li><a href="#secrets">ğŸ” Migrating Secrets</a></li>
            <li><a href="#verification">âœ”ï¸ Verification</a></li>
            <li><a href="#troubleshooting">ğŸ”§ Troubleshooting</a></li>
        </ul>
    </nav>

    <section id="prerequisites">
        <h2>âœ… Prerequisites</h2>

        <h3>ğŸ› ï¸ Required Tools</h3>
        <table>
            <thead>
                <tr>
                    <th>Tool</th>
                    <th>Purpose</th>
                    <th>Required</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>ğŸš <strong>Git Bash</strong></td>
                    <td>Shell environment (Windows)</td>
                    <td>âœ… Yes</td>
                </tr>
                <tr>
                    <td>ğŸ˜ <strong>PostgreSQL Client</strong></td>
                    <td><code>psql</code>, <code>pg_dump</code>, <code>pg_restore</code></td>
                    <td>âœ… Yes</td>
                </tr>
                <tr>
                    <td>ğŸŸ© <strong>Supabase CLI</strong></td>
                    <td>v2.58.5 or later</td>
                    <td>âœ… Yes</td>
                </tr>
                <tr>
                    <td>ğŸ“Š <strong>jq</strong></td>
                    <td>JSON processor</td>
                    <td>âœ… Yes</td>
                </tr>
                <tr>
                    <td>ğŸ”’ <strong>GPG</strong></td>
                    <td>Encryption (optional)</td>
                    <td>âšª Optional</td>
                </tr>
            </tbody>
        </table>

        <h3>ğŸ” Check Tool Availability</h3>
        <pre><code># Check PostgreSQL tools
psql --version
pg_dump --version
pg_restore --version

# Check Supabase CLI
supabase --version

# Check jq
jq --version

# Check GPG (optional)
gpg --version</code></pre>

        <h3>ğŸ“¥ Install Missing Tools</h3>

        <h4>ğŸ“Š jq on Windows (Git Bash):</h4>
        <pre><code>mkdir -p ~/bin
curl -L https://github.com/jqlang/jq/releases/download/jq-1.7.1/jq-win64.exe -o ~/bin/jq.exe
chmod +x ~/bin/jq.exe
export PATH="$HOME/bin:$PATH"
echo 'export PATH="$HOME/bin:$PATH"' >> ~/.bashrc</code></pre>

        <h4>ğŸŸ© Supabase CLI:</h4>
        <p>See: <a href="https://supabase.com/docs/guides/cli/getting-started"
                target="_blank">https://supabase.com/docs/guides/cli/getting-started</a></p>
    </section>

    <section id="setup">
        <h2>ğŸ› ï¸ Initial Setup</h2>

        <div class="callout callout-success">
            <div class="callout-title">ğŸ“¦ Getting the Backup Scripts</div>
            <p><strong>Option 1: You already have them</strong></p>
            <p>If you're reading this guide from your project, the scripts are already at:</p>
            <p><code>scripts/supabase-backup/</code></p>
            <ul>
                <li>âœ… <code>backup_supabase.sh</code> - Main backup script</li>
                <li>âœ… <code>restore_supabase.sh</code> - Main restore script</li>
                <li>âœ… <code>verify_restore.sh</code> - Verification script</li>
            </ul>

            <p><strong>Option 2: Download from GitHub</strong></p>
            <p>If you're setting up from scratch, download the scripts from:</p>
            <p>ğŸ”— <strong>GitHub Repository:</strong> <a href="https://github.com/yogique/supabase-backup-tools"
                    target="_blank">https://github.com/yogique/supabase-backup-tools</a></p>
            <pre><code># Clone the repository
git clone https://github.com/yogique/supabase-backup-tools.git
cd supabase-backup-tools

# Copy scripts to your project
cp -r scripts/supabase-backup /path/to/your/project/scripts/</code></pre>

            <p><strong>Option 3: Contact Your Team</strong></p>
            <p>If you're part of a team using this tool, request the scripts from:</p>
            <ul>
                <li>ğŸ“§ Your team lead or DevOps engineer</li>
                <li>ğŸ“‚ Your company's internal repository</li>
                <li>ğŸ’¬ Your team's documentation/wiki</li>
            </ul>
        </div>

        <div class="callout callout-success">
            <div class="callout-title">âœ¨ Good News: Scripts Are Schema-Agnostic!</div>
            <p><strong>You DON'T need to update scripts when your database changes!</strong></p>
            <p>The backup scripts use PostgreSQL's native tools (<code>pg_dump</code>, <code>pg_dumpall</code>) and
                Supabase CLI, which automatically capture:</p>
            <ul>
                <li>âœ… <strong>ALL tables</strong> - No matter how many you add/remove</li>
                <li>âœ… <strong>ALL columns</strong> - Including new fields you create</li>
                <li>âœ… <strong>ALL Edge Functions</strong> - Dynamically lists and downloads all functions</li>
                <li>âœ… <strong>ALL RLS policies</strong> - Captured in schema dump</li>
                <li>âœ… <strong>ALL triggers & functions</strong> - Automatically included</li>
                <li>âœ… <strong>ALL secrets</strong> - Lists whatever secrets exist</li>
                <li>âœ… <strong>ALL data</strong> - Every row in every table</li>
            </ul>
            <p><strong>Example:</strong></p>
            <p>Today you have 50 tables â†’ Script backs up 50 tables<br>
                Tomorrow you add 10 more tables â†’ Same script backs up 60 tables<br>
                No changes needed! ğŸ‰</p>
        </div>

        <div class="callout callout-info">
            <div class="callout-title">ğŸ“‹ How It Works</div>
            <p>The scripts use <strong>dynamic discovery</strong>:</p>
            <ul>
                <li><code>pg_dump</code> - Scans your database and exports everything it finds</li>
                <li><code>supabase functions list</code> - Lists all Edge Functions at backup time</li>
                <li><code>supabase secrets list</code> - Lists all secrets currently configured</li>
            </ul>
            <p>No hardcoded table names, no manual configuration needed!</p>
        </div>

        <div class="callout callout-warning">
            <div class="callout-title">âš ï¸ When You WOULD Need to Update Scripts</div>
            <p>You only need to update the scripts if:</p>
            <ul>
                <li>ğŸ› Bug fixes are released</li>
                <li>âœ¨ New features are added (e.g., better compression, new backup options)</li>
                <li>ğŸ”§ Supabase CLI changes its API (rare)</li>
                <li>âš™ï¸ You want to customize backup behavior (exclude certain schemas, etc.)</li>
            </ul>
            <p><strong>But NOT for schema changes!</strong> That's handled automatically. ğŸš€</p>
        </div>

        <div class="step">
            <h3>1ï¸âƒ£ Get Your Supabase Project Credentials</h3>
            <p><strong>Step-by-step to find your credentials:</strong></p>
            <ol>
                <li>ğŸŒ Go to <a href="https://supabase.com/dashboard" target="_blank">https://supabase.com/dashboard</a>
                </li>
                <li>ğŸ”‘ Log in to your account</li>
                <li>ğŸ“‚ Click on your project (the one you want to backup)</li>
                <li>âš™ï¸ Click <strong>Settings</strong> (gear icon in left sidebar)</li>
                <li>ğŸ”Œ Click <strong>Database</strong></li>
                <li>ğŸ“‹ Under "Connection string" section, select <strong>Session pooler</strong> tab</li>
            </ol>

            <div class="callout callout-success">
                <div class="callout-title">âœ… You'll see these values:</div>
                <ul>
                    <li><strong>Host:</strong> <code>aws-0-ap-south-1.pooler.supabase.com</code> (or similar region)
                    </li>
                    <li><strong>Database name:</strong> <code>postgres</code></li>
                    <li><strong>Port:</strong> <code>5432</code></li>
                    <li><strong>User:</strong> <code>postgres.iddvvefpwgwmgpyelzcv</code> (format:
                        postgres.YOUR_PROJECT_REF)</li>
                    <li><strong>Password:</strong> Click "Reset database password" if you don't have it, or use existing
                    </li>
                </ul>
            </div>

            <div class="callout callout-info">
                <div class="callout-title">ğŸ†” Finding Your PROJECT_REF</div>
                <p>The <strong>Project Reference ID</strong> is visible in multiple places:</p>
                <ul>
                    <li>In the URL:
                        <code>https://supabase.com/dashboard/project/<strong>iddvvefpwgwmgpyelzcv</strong></code></li>
                    <li>In Settings â†’ General â†’ "Reference ID"</li>
                    <li>In the database username: <code>postgres.<strong>iddvvefpwgwmgpyelzcv</strong></code></li>
                </ul>
                <p>It's a random string like: <code>iddvvefpwgwmgpyelzcv</code> or <code>qkqonewssbldfckqmbvp</code></p>
            </div>
        </div>

        <div class="step">
            <h3>2ï¸âƒ£ Create Backup Directory Structure</h3>

            <p><strong>For Windows (PowerShell):</strong></p>
            <pre><code># Navigate to your project root
cd "D:\New folder\tryfix - Copy"

# Create directory structure (if not exists)
New-Item -ItemType Directory -Force -Path "scripts\supabase-backup\backups"
cd scripts\supabase-backup</code></pre>

            <p><strong>For Linux/Mac (Git Bash on Windows):</strong></p>
            <pre><code># Navigate to your project root
cd /d/New\ folder/tryfix\ -\ Copy

# Create directory structure
mkdir -p scripts/supabase-backup/backups
cd scripts/supabase-backup</code></pre>

            <div class="callout callout-success">
                <div class="callout-title">âœ… Verify the scripts exist:</div>
                <p>Check that these files are present:</p>
                <ul>
                    <li>âœ… <code>backup_supabase.sh</code></li>
                    <li>âœ… <code>restore_supabase.sh</code></li>
                    <li>âœ… <code>verify_restore.sh</code></li>
                </ul>
                <p>If missing, contact your team to get them!</p>
            </div>
        </div>

        <div class="step">
            <h3>2ï¸âƒ£ Create .gitignore File</h3>
            <div class="callout callout-warning">
                <div class="callout-title">âš ï¸ Security Warning</div>
                Prevent sensitive data from being committed
            </div>
            <pre><code>cat > .gitignore << 'EOF'
# Environment files
.env
.env.*

# Backups
backups/
*.dump
*.sql
*.tar.gz
*.tar.gz.gpg

# Secrets
secrets-to-migrate.txt
*-secrets.txt

# Logs
*.log
EOF</code></pre>
        </div>

        <div class="step">
            <h3>4ï¸âƒ£ Configure Environment Variables</h3>
            <p>Create and edit your <code>.env</code> file:</p>

            <p><strong>For Windows (PowerShell):</strong></p>
            <pre><code>notepad .env</code></pre>

            <p><strong>For Linux/Mac/Git Bash:</strong></p>
            <pre><code>nano .env</code></pre>

            <div class="callout callout-info">
                <div class="callout-title">ğŸ”‘ Copy and paste this template, then fill in YOUR values:</div>
            </div>

            <pre><code># Source Project Details
PROJECT_REF=iddvvefpwgwmgpyelzcv
PG_HOST=aws-0-ap-south-1.pooler.supabase.com
PG_PORT=5432
PG_DATABASE=postgres
PG_USER=postgres.iddvvefpwgwmgpyelzcv
PG_PASSWORD=YourActualPasswordHere

# Backup Settings
BACKUP_DIR=./backups</code></pre>

            <div class="callout callout-success">
                <div class="callout-title">ğŸ“ Example with real values:</div>
                <p>If your Project Reference ID is <code>iddvvefpwgwmgpyelzcv</code> and you're in Mumbai region:</p>
                <pre><code>PROJECT_REF=iddvvefpwgwmgpyelzcv
PG_HOST=aws-0-ap-south-1.pooler.supabase.com
PG_PORT=5432
PG_DATABASE=postgres
PG_USER=postgres.iddvvefpwgwmgpyelzcv
PG_PASSWORD=abc123XYZ!yourPassword
BACKUP_DIR=./backups</code></pre>
            </div>

            <div class="callout callout-warning">
                <div class="callout-title">âš ï¸ Important - Replace these values:</div>
                <ul>
                    <li><code>PROJECT_REF</code>: Replace with YOUR project ref from step 1</li>
                    <li><code>PG_HOST</code>: Use the host from "Session pooler" tab (includes your region like
                        ap-south-1, us-east-1, ap-northeast-2)</li>
                    <li><code>PG_USER</code>: Format is always <code>postgres.YOUR_PROJECT_REF</code></li>
                    <li><code>PG_PASSWORD</code>: The actual database password from Supabase dashboard</li>
                </ul>
            </div>

            <div class="callout callout-info">
                <div class="callout-title">ğŸŒ Common regions:</div>
                <ul>
                    <li>Mumbai: <code>aws-0-ap-south-1.pooler.supabase.com</code></li>
                    <li>Seoul: <code>aws-1-ap-northeast-2.pooler.supabase.com</code></li>
                    <li>US East: <code>aws-0-us-east-1.pooler.supabase.com</code></li>
                    <li>Singapore: <code>aws-0-ap-southeast-1.pooler.supabase.com</code></li>
                </ul>
            </div>
        </div>

        <div class="step">
            <h3>5ï¸âƒ£ Test Database Connection</h3>

            <p><strong>For Windows (PowerShell):</strong></p>
            <pre><code>cd scripts\supabase-backup

# Load environment variables
Get-Content .env | ForEach-Object {
    if ($_ -match '^([^=]+)=(.*)$') {
        [Environment]::SetEnvironmentVariable($matches[1], $matches[2], 'Process')
    }
}

# Test connection
$env:PGPASSWORD = (Get-Content .env | Select-String "PG_PASSWORD" | ForEach-Object { $_ -replace "PG_PASSWORD=","" })
psql -h "$env:PG_HOST" -p "$env:PG_PORT" -U "$env:PG_USER" -d "$env:PG_DATABASE" -c "SELECT 1;"</code></pre>

            <p><strong>For Linux/Mac/Git Bash:</strong></p>
            <pre><code>cd scripts/supabase-backup
source .env
export PGPASSWORD="$PG_PASSWORD"
psql -h "$PG_HOST" -p "$PG_PORT" -U "$PG_USER" -d "$PG_DATABASE" -c "SELECT 1;"</code></pre>

            <div class="callout callout-success">
                <div class="callout-title">âœ… Expected output:</div>
                <pre><code> ?column? 
----------
        1
(1 row)</code></pre>
                <p>If you see this, your database connection works! ğŸ‰</p>
            </div>

            <div class="callout callout-error">
                <div class="callout-title">âŒ If you get errors:</div>
                <ul>
                    <li><strong>"command not found: psql"</strong> â†’ PostgreSQL client not installed (see Prerequisites)
                    </li>
                    <li><strong>"password authentication failed"</strong> â†’ Wrong password in .env file</li>
                    <li><strong>"could not translate host name"</strong> â†’ Wrong PG_HOST (check Session pooler hostname)
                    </li>
                    <li><strong>"role does not exist"</strong> â†’ Wrong PG_USER format (should be postgres.PROJECT_REF)
                    </li>
                </ul>
            </div>
        </div>
    </section>

    <section id="backup">
        <h2>ğŸ’¾ Creating a Backup</h2>

        <div class="callout callout-info">
            <div class="callout-title">ğŸ“ Note:</div>
            <p>The backup script <code>backup_supabase.sh</code> should already be in your
                <code>scripts/supabase-backup/</code> directory. If it's missing, you can download it from your team
                repository or request it from your team lead.
            </p>
        </div>

        <div class="step">
            <h3>ğŸ“‹ What the Backup Script Does</h3>
            <p>The <code>backup_supabase.sh</code> script automates the following tasks:</p>
            <ul>
                <li>ğŸ” <strong>Security checks</strong> - Validates environment and warns about sensitive data</li>
                <li>ğŸ˜ <strong>Database backup</strong> - Uses <code>pg_dump</code> to create:
                    <ul>
                        <li><code>db-full.dump</code> - Complete database in custom format</li>
                        <li><code>db-schema.sql</code> - Schema DDL only</li>
                        <li><code>db-data.sql</code> - Data only (INSERT statements)</li>
                    </ul>
                </li>
                <li>ğŸ‘¥ <strong>Roles & globals</strong> - Exports database roles and global objects using
                    <code>pg_dumpall</code>
                </li>
                <li>âš¡ <strong>Edge Functions</strong> - Downloads all function source code from Supabase</li>
                <li>ğŸ” <strong>Secrets list</strong> - Exports secret names (not values for security)</li>
                <li>âš™ï¸ <strong>Project metadata</strong> - Saves project configuration to JSON</li>
                <li>ğŸ“¦ <strong>Compression</strong> - Creates a tar.gz archive of everything</li>
                <li>ğŸ”’ <strong>Optional encryption</strong> - GPG encryption if configured</li>
            </ul>
        </div>

        <div class="step">
            <h3>ğŸ”§ Script Requirements</h3>
            <p>The script requires these tools (already verified in Prerequisites):</p>
            <table>
                <thead>
                    <tr>
                        <th>Tool</th>
                        <th>Used For</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>pg_dump</code></td>
                        <td>Database backup</td>
                    </tr>
                    <tr>
                        <td><code>pg_dumpall</code></td>
                        <td>Global objects & roles</td>
                    </tr>
                    <tr>
                        <td><code>supabase</code></td>
                        <td>Edge Functions & secrets</td>
                    </tr>
                    <tr>
                        <td><code>jq</code></td>
                        <td>JSON processing</td>
                    </tr>
                    <tr>
                        <td><code>tar</code></td>
                        <td>Archive creation</td>
                    </tr>
                    <tr>
                        <td><code>gpg</code> (optional)</td>
                        <td>Backup encryption</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="step">
            <h3>1ï¸âƒ£ Authenticate with Supabase</h3>
            <pre><code>supabase login</code></pre>
            <p>ğŸŒ This will open your browser. Complete the authentication.</p>
        </div>

        <div class="step">
            <h3>2ï¸âƒ£ Run Backup Script</h3>
            <pre><code>cd scripts/supabase-backup
./backup_supabase.sh</code></pre>
        </div>

        <div class="step">
            <h3>3ï¸âƒ£ Backup Contents</h3>
            <p>The script creates a timestamped backup directory containing:</p>
            <div class="tree">
                ğŸ“ backups/
                â””â”€â”€ ğŸ“ backup-{project_ref}-{timestamp}/
                â”œâ”€â”€ ğŸ“ backup.log # Backup process log
                â”œâ”€â”€ ğŸ’¾ db-full.dump # Complete database (custom format)
                â”œâ”€â”€ ğŸ“„ db-schema.sql # Schema DDL
                â”œâ”€â”€ ğŸ“„ db-data.sql # Data only
                â”œâ”€â”€ ğŸŒ globals.sql # Global objects
                â”œâ”€â”€ ğŸ‘¥ roles.sql # Database roles
                â”œâ”€â”€ ğŸ“ functions/ # Edge Functions source code
                â”‚ â”œâ”€â”€ ğŸ“ function-1/
                â”‚ â”œâ”€â”€ ğŸ“ function-2/
                â”‚ â””â”€â”€ ...
                â””â”€â”€ âš™ï¸ project-config.json # Project metadata
            </div>
        </div>

        <div class="step">
            <h3>4ï¸âƒ£ Backup Archive</h3>
            <p>The backup is compressed and optionally encrypted:</p>
            <div class="tree">
                ğŸ“ backups/
                â”œâ”€â”€ ğŸ“¦ supabase-backup-{project_ref}-{timestamp}.tar.gz # Compressed
                â”œâ”€â”€ ğŸ”’ supabase-backup-{project_ref}-{timestamp}.tar.gz.gpg # Encrypted (optional)
                â””â”€â”€ ğŸ“„ checksums.txt # SHA256 checksums
            </div>
            <div class="callout callout-info">
                <div class="callout-title">ğŸ“Š Archive size:</div>
                Typically 300-500 KB for schema-heavy projects
            </div>
        </div>

        <div class="step">
            <h3>5ï¸âƒ£ Manual Backup Operations (Advanced)</h3>
            <p>If you need to manually create or verify backups without the script:</p>

            <h4>ğŸ“¦ Create tar.gz Archive Manually</h4>
            <pre><code>cd scripts/supabase-backup/backups
tar -czf supabase-backup-{project_ref}-{timestamp}.tar.gz backup-{project_ref}-{timestamp}/</code></pre>

            <h4>ğŸ” Create SHA256 Checksum</h4>
            <p>For integrity verification:</p>
            <pre><code># Windows (PowerShell)
Get-FileHash supabase-backup-{project_ref}-{timestamp}.tar.gz -Algorithm SHA256

# Linux/Mac/Git Bash
sha256sum supabase-backup-{project_ref}-{timestamp}.tar.gz > checksums.txt</code></pre>

            <h4>ğŸ”’ Encrypt Backup with GPG</h4>
            <p><strong>Symmetric encryption</strong> (password-based):</p>
            <pre><code>gpg --symmetric --cipher-algo AES256 supabase-backup-{project_ref}-{timestamp}.tar.gz</code></pre>
            <p>This creates: <code>supabase-backup-{project_ref}-{timestamp}.tar.gz.gpg</code></p>
            <p>ğŸ’¡ You'll be prompted to enter a passphrase. <strong>Store this securely!</strong></p>

            <p><strong>Public key encryption</strong> (for team sharing):</p>
            <pre><code># Encrypt for specific recipient
gpg --encrypt --recipient your-email@example.com supabase-backup-{project_ref}-{timestamp}.tar.gz

# Encrypt for multiple recipients
gpg --encrypt --recipient admin1@example.com --recipient admin2@example.com backup.tar.gz</code></pre>

            <h4>ğŸ”“ Decrypt Backup</h4>
            <p><strong>Decrypt symmetric (password-based):</strong></p>
            <pre><code>gpg --decrypt supabase-backup-{project_ref}-{timestamp}.tar.gz.gpg > backup-decrypted.tar.gz</code></pre>
            <p>Enter the passphrase when prompted.</p>

            <p><strong>Decrypt with private key:</strong></p>
            <pre><code>gpg --decrypt supabase-backup-{project_ref}-{timestamp}.tar.gz.gpg > backup-decrypted.tar.gz</code></pre>
            <p>GPG will automatically use your private key if available.</p>

            <h4>âœ… Verify Checksum</h4>
            <p>Before restoring, verify backup integrity:</p>
            <pre><code># Windows (PowerShell)
$expected = "22e97632fe2c975474e5f08021754d0911f58023ecc7eba5b8c7c97a565c4140"
$actual = (Get-FileHash backup.tar.gz -Algorithm SHA256).Hash.ToLower()
if ($actual -eq $expected) { Write-Host "âœ… Checksum verified!" } else { Write-Host "âŒ Checksum mismatch!" }

# Linux/Mac/Git Bash
sha256sum -c checksums.txt</code></pre>

            <h4>ğŸ“‚ Extract Archive</h4>
            <pre><code># Extract to current directory
tar -xzf supabase-backup-{project_ref}-{timestamp}.tar.gz

# Extract to specific directory
tar -xzf supabase-backup-{project_ref}-{timestamp}.tar.gz -C /path/to/destination/</code></pre>

            <div class="callout callout-warning">
                <div class="callout-title">âš ï¸ Security Best Practices:</div>
                <ul>
                    <li>ğŸ” Always use AES256 cipher for encryption</li>
                    <li>ğŸ”‘ Use strong passphrases (16+ characters, mixed case, numbers, symbols)</li>
                    <li>ğŸ’¾ Store passphrases in password manager (1Password, Bitwarden, etc.)</li>
                    <li>âœ… Verify checksums after file transfers</li>
                    <li>ğŸ—‘ï¸ Securely delete unencrypted backups after encryption: <code>shred -u backup.tar.gz</code>
                        (Linux) or delete permanently</li>
                    <li>â˜ï¸ Store encrypted backups off-site (separate cloud storage, different region)</li>
                </ul>
            </div>
        </div>
    </section>

    <section id="restore">
        <h2>ğŸ”„ Restoring to a New Project</h2>

        <div class="step">
            <h3>1ï¸âƒ£ Create New Supabase Project</h3>
            <ol>
                <li>ğŸŒ Log into Supabase Dashboard (can be different account)</li>
                <li>â• Create new project</li>
                <li>â³ Wait for project to be fully provisioned</li>
                <li>ğŸ“‹ Note the <strong>Project Reference ID</strong></li>
            </ol>
        </div>

        <div class="step">
            <h3>2ï¸âƒ£ Get Target Project Credentials</h3>
            <p>From Dashboard â†’ Settings â†’ Database:</p>
            <ul>
                <li>ğŸ”Œ Connection pooler hostname: <code>aws-1-{region}.pooler.supabase.com</code></li>
                <li>ğŸ”¢ Port: <code>5432</code></li>
                <li>ğŸ’¾ Database: <code>postgres</code></li>
                <li>ğŸ‘¤ User: <code>postgres.{new_project_ref}</code></li>
                <li>ğŸ”‘ Password: (copy from dashboard)</li>
            </ul>
        </div>

        <div class="step">
            <h3>3ï¸âƒ£ Update .env with Target Project</h3>
            <p>Add to your <code>.env</code> file:</p>
            <pre><code># ğŸ¯ Target Project Details (for restore)
NEW_PROJECT_REF=new_project_ref_here
NEW_PG_HOST=aws-1-region.pooler.supabase.com
NEW_PG_PORT=5432
NEW_PG_DATABASE=postgres
NEW_PG_USER=postgres.new_project_ref
NEW_PG_PASSWORD=new_db_password_here</code></pre>
        </div>

        <div class="step">
            <h3>4ï¸âƒ£ Fix Known Issues in Backup</h3>
            <div class="callout callout-warning">
                <div class="callout-title">âš ï¸ If you encounter JSON parsing errors</div>
            </div>
            <pre><code>cd backups/backup-{project_ref}-{timestamp}
nano backups/project-config.json</code></pre>
            <p>Look for malformed JSON like:</p>
            <pre><code>"source_project": ,</code></pre>
            <p>Change to:</p>
            <pre><code>"source_project": {},</code></pre>
        </div>

        <div class="step">
            <h3>5ï¸âƒ£ Manual Database Restore (Recommended)</h3>
            <p>Navigate to extracted backup directory:</p>
            <pre><code>cd scripts/supabase-backup/backups/backup-{project_ref}-{timestamp}
source ../../.env
export PGPASSWORD="$NEW_PG_PASSWORD"

# Run restore
pg_restore --clean --if-exists --no-owner --no-privileges \
  --dbname="postgresql://${NEW_PG_USER}:${NEW_PG_PASSWORD}@${NEW_PG_HOST}:${NEW_PG_PORT}/${NEW_PG_DATABASE}" \
  db-full.dump</code></pre>

            <div class="callout callout-info">
                <div class="callout-title">ğŸ’¡ Expected Errors (NORMAL):</div>
                <pre><code>âŒ ERROR: must be owner of table {auth/storage/realtime tables}
âŒ ERROR: permission denied for schema {auth/storage/realtime}
âŒ ERROR: must be owner of event trigger {system triggers}</code></pre>
                <p>â„¹ï¸ These errors are for <strong>Supabase system-managed</strong> schemas that cannot be modified.
                    Your <code>public</code> schema tables will restore successfully.</p>
                <p>ğŸ“Š <strong>Total errors:</strong> ~712 (all normal and expected)</p>
            </div>
        </div>

        <div class="step">
            <h3>6ï¸âƒ£ Verify Tables Restored</h3>
            <pre><code>psql -h "$NEW_PG_HOST" -p "$NEW_PG_PORT" -U "$NEW_PG_USER" -d "$NEW_PG_DATABASE" -c "\dt public.*"</code></pre>
            <div class="callout callout-success">
                <div class="callout-title">âœ… Success:</div>
                You should see all your tables listed.
            </div>
        </div>

        <div class="step">
            <h3>7ï¸âƒ£ Verify Data</h3>
            <pre><code>psql -h "$NEW_PG_HOST" -p "$NEW_PG_PORT" -U "$NEW_PG_USER" -d "$NEW_PG_DATABASE" \
  -c "SELECT schemaname, relname as tablename, n_live_tup as row_count 
      FROM pg_stat_user_tables 
      WHERE schemaname = 'public' 
      ORDER BY n_live_tup DESC 
      LIMIT 15;"</code></pre>
            <div class="callout callout-success">
                <div class="callout-title">âœ… Verify:</div>
                Row counts match your source data.
            </div>
        </div>
    </section>

    <section id="functions">
        <h2>âš¡ Migrating Edge Functions</h2>

        <div class="step">
            <h3>1ï¸âƒ£ Generate Access Token for Target Account</h3>
            <p>If target project is in a <strong>different Supabase account</strong>:</p>
            <ol>
                <li>ğŸŒ Log into the <strong>target account</strong> at https://app.supabase.com</li>
                <li>ğŸ‘¤ Click profile icon â†’ <strong>Access Tokens</strong></li>
                <li>â• Click <strong>Generate New Token</strong></li>
                <li>ğŸ“ Name: "CLI Deployment" or similar</li>
                <li>ğŸ“‹ Copy the token (format: <code>sbp_xxxxxxxxxxxxxxx</code>)</li>
            </ol>
        </div>

        <div class="step">
            <h3>2ï¸âƒ£ Authenticate and Link to Target Project</h3>
            <pre><code>export SUPABASE_ACCESS_TOKEN="sbp_your_new_token_here"
cd scripts/supabase-backup/backups/backup-{project_ref}-{timestamp}/functions
supabase link --project-ref {new_project_ref}</code></pre>
            <div class="callout callout-success">
                <div class="callout-title">âœ… Expected output:</div>
                <code>Finished supabase link.</code>
            </div>
        </div>

        <div class="step">
            <h3>3ï¸âƒ£ Deploy All Edge Functions</h3>
            <pre><code>supabase functions deploy --project-ref {new_project_ref}</code></pre>
            <div class="callout callout-success">
                <div class="callout-title">âœ… Expected output:</div>
                <code>Deployed Functions on project {new_project_ref}: function-1, function-2, function-3, ...</code>
            </div>
        </div>

        <div class="step">
            <h3>4ï¸âƒ£ Verify in Dashboard</h3>
            <p>ğŸŒ Open: <code>https://supabase.com/dashboard/project/{new_project_ref}/functions</code></p>
            <div class="callout callout-success">
                <div class="callout-title">âœ… All functions should be listed and show as deployed.</div>
            </div>
        </div>
    </section>

    <section id="secrets">
        <h2>ğŸ” Migrating Secrets</h2>

        <div class="step">
            <h3>1ï¸âƒ£ List Secrets from Source Project</h3>
            <pre><code># Switch to source project authentication
unset SUPABASE_ACCESS_TOKEN
cd /path/to/your/project
supabase link --project-ref {source_project_ref}
supabase secrets list --project-ref {source_project_ref}</code></pre>
            <p>ğŸ“‹ This shows <strong>secret names only</strong> (values are never exposed by CLI for security).</p>
        </div>

        <div class="step">
            <h3>2ï¸âƒ£ Create Secrets Migration File</h3>
            <p>Create a template file <code>secrets-to-migrate.txt</code>:</p>
            <pre><code>TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
RESEND_API_KEY=
ZOOM_CLIENT_ID=
ZOOM_CLIENT_SECRET=
# ... add all your secrets</code></pre>
        </div>

        <div class="step">
            <h3>3ï¸âƒ£ Fill in Secret Values</h3>
            <div class="callout callout-info">
                <div class="callout-title">ğŸ“ Option A: Edit file manually</div>
                <pre><code>nano scripts/supabase-backup/secrets-to-migrate.txt</code></pre>
                <p>Copy values from source project dashboard:<br>
                    <code>https://supabase.com/dashboard/project/{source_ref}/settings/functions</code>
                </p>
            </div>

            <div class="callout callout-success">
                <div class="callout-title">ğŸŒ Option B: Use Dashboard directly (easier)</div>
                <ol>
                    <li>Open source project secrets page</li>
                    <li>ğŸ“‹ Copy each value</li>
                    <li>Open target project secrets page</li>
                    <li>â• Click "Add new secret" and paste each one</li>
                </ol>
            </div>
        </div>

        <div class="step">
            <h3>4ï¸âƒ£ Bulk Set Secrets via CLI (if using Option A)</h3>
            <pre><code>export SUPABASE_ACCESS_TOKEN="sbp_your_target_token"
cd /path/to/your/project
supabase link --project-ref {new_project_ref}
supabase secrets set --project-ref {new_project_ref} --env-file scripts/supabase-backup/secrets-to-migrate.txt</code></pre>
            <div class="callout callout-warning">
                <div class="callout-title">âš ï¸ Note:</div>
                Secret names cannot contain special characters like <code>@</code> or <code>.</code> for CLI method. Use
                Dashboard for those.
            </div>
        </div>
    </section>

    <section id="verification">
        <h2>âœ”ï¸ Verification</h2>

        <div class="step">
            <h3>ğŸ” Run Verification Script</h3>
            <pre><code>cd scripts/supabase-backup
./verify_restore.sh</code></pre>
            <p>The script checks:</p>
            <ul>
                <li>âœ… Database connectivity</li>
                <li>âœ… Schema count</li>
                <li>âœ… Table count</li>
                <li>âœ… Row counts</li>
                <li>âœ… RLS policies</li>
                <li>âœ… Database functions</li>
                <li>âœ… Triggers</li>
            </ul>
        </div>

        <div class="step">
            <h3>âœ“ Manual Verification Checklist</h3>

            <h4>ğŸ’¾ Database:</h4>
            <pre><code># Count tables
psql ... -c "SELECT COUNT(*) FROM information_schema.tables WHERE table_schema = 'public';"

# Count RLS policies
psql ... -c "SELECT COUNT(*) FROM pg_policies WHERE schemaname = 'public';"

# Count functions
psql ... -c "SELECT COUNT(*) FROM pg_proc p JOIN pg_namespace n ON p.pronamespace = n.oid WHERE n.nspname = 'public';"</code></pre>

            <h4>âš¡ Edge Functions:</h4>
            <ul>
                <li>âœ… Check Dashboard: All functions should be visible</li>
                <li>âœ… Test invocations: Try calling a function</li>
            </ul>

            <h4>ğŸ” Secrets:</h4>
            <ul>
                <li>âœ… Test functions that require secrets</li>
                <li>âœ… Check logs for "missing secret" errors</li>
            </ul>
        </div>
    </section>

    <section id="troubleshooting">
        <h2>ğŸ”§ Troubleshooting</h2>

        <h3>ğŸ” Common Issues and Solutions</h3>

        <div class="step">
            <h4>1ï¸âƒ£ DNS Resolution Failed</h4>
            <div class="callout callout-error">
                <div class="callout-title">âŒ ERROR:</div>
                <code>could not translate host name db.*.supabase.co to address</code>
            </div>
            <div class="callout callout-success">
                <div class="callout-title">âœ… Solution:</div>
                Use connection pooler instead of direct connection. Change <code>db.{project}.supabase.co</code> to
                <code>aws-0-{region}.pooler.supabase.com</code>
            </div>
        </div>

        <div class="step">
            <h4>2ï¸âƒ£ Authentication Failed</h4>
            <div class="callout callout-error">
                <div class="callout-title">âŒ ERROR:</div>
                <code>Tenant or user not found</code>
            </div>
            <div class="callout callout-success">
                <div class="callout-title">âœ… Solution:</div>
                Use fully qualified username. Change <code>postgres</code> to <code>postgres.{project_ref}</code>
            </div>
        </div>

        <div class="step">
            <h4>3ï¸âƒ£ JSON Parsing Error</h4>
            <div class="callout callout-error">
                <div class="callout-title">âŒ ERROR:</div>
                <code>Failed to parse JSON</code>
            </div>
            <div class="callout callout-success">
                <div class="callout-title">âœ… Solution:</div>
                Fix malformed JSON in <code>project-config.json</code>
                <pre><code>nano backups/project-config.json
# Change: "source_project": ,
# To: "source_project": {},</code></pre>
            </div>
        </div>

        <div class="step">
            <h4>4ï¸âƒ£ pg_restore Errors for auth/storage/realtime</h4>
            <div class="callout callout-error">
                <div class="callout-title">âŒ ERROR:</div>
                <pre><code>must be owner of table users
permission denied for schema auth</code></pre>
            </div>
            <div class="callout callout-success">
                <div class="callout-title">âœ… Solution:</div>
                These are <strong>expected and normal</strong>. Supabase system tables cannot be modified. Your
                <code>public</code> schema restores successfully.
            </div>
        </div>

        <div class="step">
            <h4>5ï¸âƒ£ Edge Functions Deployment Fails</h4>
            <div class="callout callout-error">
                <div class="callout-title">âŒ ERROR:</div>
                <code>Your account does not have the necessary privileges</code>
            </div>
            <div class="callout callout-success">
                <div class="callout-title">âœ… Solution:</div>
                Generate an access token for the target account and use <code>SUPABASE_ACCESS_TOKEN</code> environment
                variable.
            </div>
        </div>
    </section>

    <section id="best-practices">
        <h2>ğŸ“š Best Practices</h2>

        <div class="step">
            <h3>ğŸ”„ Regular Backups</h3>
            <ul>
                <li>â° Schedule weekly backups: <code>cron: 0 2 * * 0</code></li>
                <li>ğŸ“… Keep 7-30 days of retention</li>
                <li>â˜ï¸ Store encrypted backups off-site</li>
            </ul>
        </div>

        <div class="step">
            <h3>ğŸ§ª Testing Restores</h3>
            <ul>
                <li>ğŸ”¬ Test restore process quarterly</li>
                <li>âœ… Verify data integrity</li>
                <li>ğŸ“ Document any manual steps required</li>
            </ul>
        </div>

        <div class="step">
            <h3>ğŸ”’ Security</h3>
            <ul>
                <li>ğŸš« Never commit <code>.env</code> to git (already in .gitignore)</li>
                <li>ğŸ” Use GPG encryption for backup archives</li>
                <li>ğŸ”„ Rotate access tokens regularly</li>
                <li>ğŸ—ï¸ Store secrets securely (use password manager)</li>
            </ul>
        </div>
    </section>

    <section id="checklist">
        <h2>âœ… Migration Checklist</h2>

        <div class="checklist">
            <p>Use this checklist for complete migration:</p>
            <ul>
                <li><input type="checkbox"> ğŸ’¾ Create backup of source project</li>
                <li><input type="checkbox"> âœ… Verify backup completed successfully</li>
                <li><input type="checkbox"> â• Create new target project in Supabase</li>
                <li><input type="checkbox"> âš™ï¸ Configure target credentials in .env</li>
                <li><input type="checkbox"> ğŸ”§ Fix project-config.json if needed</li>
                <li><input type="checkbox"> ğŸ”„ Run database restore (pg_restore)</li>
                <li><input type="checkbox"> ğŸ“Š Verify all tables restored</li>
                <li><input type="checkbox"> ğŸ”¢ Verify data row counts</li>
                <li><input type="checkbox"> ğŸ”‘ Generate access token for target account</li>
                <li><input type="checkbox"> âš¡ Deploy Edge Functions</li>
                <li><input type="checkbox"> âœ… Verify functions in dashboard</li>
                <li><input type="checkbox"> ğŸ” Migrate secrets (CLI or Dashboard)</li>
                <li><input type="checkbox"> ğŸ§ª Test function invocations</li>
                <li><input type="checkbox"> âœ”ï¸ Run verification script</li>
                <li><input type="checkbox"> ğŸ”— Update application config (API URL, keys)</li>
                <li><input type="checkbox"> ğŸ§ª Test application with new project</li>
                <li><input type="checkbox"> ğŸŒ Update DNS/webhooks if applicable</li>
            </ul>
        </div>
    </section>

    <section id="quick-reference">
        <h2>âš¡ Quick Reference Commands</h2>

        <div class="step">
            <h3>ğŸ’¾ Backup</h3>
            <pre><code>cd scripts/supabase-backup
./backup_supabase.sh</code></pre>
        </div>

        <div class="step">
            <h3>ğŸ”„ Restore</h3>
            <pre><code>cd scripts/supabase-backup/backups/backup-{ref}-{timestamp}
source ../../.env
export PGPASSWORD="$NEW_PG_PASSWORD"
pg_restore --clean --if-exists --no-owner --no-privileges \
  --dbname="postgresql://${NEW_PG_USER}:${NEW_PG_PASSWORD}@${NEW_PG_HOST}:${NEW_PG_PORT}/${NEW_PG_DATABASE}" \
  db-full.dump</code></pre>
        </div>

        <div class="step">
            <h3>âš¡ Deploy Functions</h3>
            <pre><code>export SUPABASE_ACCESS_TOKEN="sbp_your_token"
cd scripts/supabase-backup/backups/backup-{ref}-{timestamp}/functions
supabase link --project-ref {new_ref}
supabase functions deploy --project-ref {new_ref}</code></pre>
        </div>

        <div class="step">
            <h3>âœ… Verify</h3>
            <pre><code>cd scripts/supabase-backup
./verify_restore.sh</code></pre>
        </div>
    </section>

    <footer
        style="margin-top: 4rem; padding: 2rem 0; border-top: 2px solid var(--border); text-align: center; color: var(--text-muted);">
        <p><strong>ğŸ“… Last Updated:</strong> December 12, 2025</p>
        <p><strong>âœ¨ Created with:</strong> Supabase Backup & Restore Toolset</p>
        <p style="margin-top: 1rem;">
            <strong>ğŸ’¡ Pro Tip:</strong> To print this as PDF, press <kbd>Ctrl+P</kbd> and select "Save as PDF" in your
            browser
        </p>
    </footer>

    <script>
        // Collapsible sections
        document.addEventListener('DOMContentLoaded', function () {
            var collapsibles = document.getElementsByClassName("collapsible");
            for (var i = 0; i < collapsibles.length; i++) {
                collapsibles[i].addEventListener("click", function () {
                    this.classList.toggle("active");
                    var content = this.nextElementSibling;
                    content.classList.toggle("active");
                });
            }

            // Copy to clipboard functionality
            var copyButtons = document.getElementsByClassName("copy-button");
            for (var i = 0; i < copyButtons.length; i++) {
                copyButtons[i].addEventListener("click", function () {
                    var codeBlock = this.previousElementSibling;
                    var code = codeBlock.textContent;
                    navigator.clipboard.writeText(code).then(function () {
                        alert('âœ… Copied to clipboard!');
                    }).catch(function (err) {
                        alert('âŒ Failed to copy: ' + err);
                    });
                });
            }
        });
    </script>

</body>

</html>